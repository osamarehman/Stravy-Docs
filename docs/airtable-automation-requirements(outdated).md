airtable-automation-requirements**Project:** Stryv Academics MVP Development

**Document:** Airtable Automations Specification

**Launch Target:** November 21, 2025

**Last Updated:** November 4, 2025, 5:00pm

---

## Overview

This document specifies all Airtable automations required for Phase 1 launch, including:
1. **n8n Webhook Triggers** - Automations that call n8n workflows
2. **Internal Automations** - Airtable-only logic (status updates, record creation)

**Total Automations: 33**

**Related Documents:**
- n8n Automation Requirements: Technical specifications for workflows triggered by these automations
- Integration Flow Map: End-to-end business process flows showing how automations connect

**Record ID Conventions:**

New records created post-migration use formatted IDs for professional appearance:
- Lessons: LSN-YYYY-#### (e.g., LSN-2025-0001)
- Payments: PAY-YYYY-#### (e.g., PAY-2025-0042)
- Payouts: PYO-YYYY-#### (e.g., PYO-2025-0015)
- Packages: PKG-#### (existing format maintained)

These are auto-generated by Airtable using auto-number fields with custom formatting.

**Internal Airtable Automations:**

Four internal automations (AT-TP14, AT-TP15, AT-TP17, AT-TP18) handle data management within Airtable and do NOT trigger n8n workflows. These create/update records for the dual-table financial tracking system (Payments and Payouts tables). See Category 2 section below for full specifications.

---

## Automation Numbering System

Automations are organized by business function using prefixes matching n8n workflows:

- **AT-L:** Lesson Management (AT-L1, AT-L2, AT-L3)
- **AT-MTL:** Mock Trial Lessons (AT-MTL1)
- **AT-TA:** Tutor Applications (AT-TA1 through AT-TA5, AT-TA3b)
- **AT-T:** Tutor-specific automations
- **AT-P:** Parent-specific automations (NOT packages)
- **AT-S:** Student-specific automations
- **AT-TP:** Tutoring Package automations (renamed from AT-P)
- **AT-U:** User Management (AT-U2)

**Example:** AT-TP7 triggers workflow TP7 (Send PO Email)

---

## Category 1: n8n Webhook Trigger Automations

These automations watch for record changes and trigger n8n workflows via webhook calls.

### AT-L Series: Lesson Management

### AT-L1: Generate Lesson Report PDF

**Trigger:** Record created OR updated in Lessons table

**Conditions:**
- “Lesson Status” = “Verified”
- “Lesson Report PDF Created At” is empty

**Actions:**
- Call n8n webhook for workflow L1
- Send: Lesson ID

**Purpose:** Generates lesson report PDF after lesson is verified

**Important:** Second condition prevents duplicate PDF generation if automation re-triggers

---

### AT-L2: Send Lesson Completion Email

**Trigger:** Record updated in Lessons table

**Conditions:**
- “Lesson Status” = “Verified”
- “Lesson Report PDF Created At” is not empty
- “Lesson Completion Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow L2
- Send: Lesson ID

**Purpose:** Sends lesson completion email with PDF attachment to client

**Important:** Ensures PDF is generated before email is sent

---

### AT-L3: Update Lesson Status After Verification

**Trigger:** Record updated in Lessons table

**Conditions:**
- “Over-Delivery Verified” = TRUE
- “Late Cancellation Verified” = TRUE
- “Transportation Verified” = TRUE
- “Lesson Status” ≠ “Verified”

**Actions:**
- Update field: “Lesson Status” = “Verified”

**Purpose:** Internal automation - updates lesson status when admin completes all verification checkboxes

**Type:** Internal Airtable automation (does NOT call n8n workflow)

**Note:** Triggers AT-L1 → L1 workflow automatically when status changes to “Verified”

---

### AT-MTL Series: Mock Trial Lesson Management

### AT-MTL1: Update Mock Trial Lesson Status

**Trigger:** Record created in Mock Trial Lessons table

**Conditions:** None (triggers on all new records)

**Actions:**
1. **Calculate submission timing:**
- Get Mock Trial Date (via lookup from Application)
- Get Lesson Report Submitted At (record creation time)
- Calculate hours elapsed

1. **Update Lesson Report Status field:**
    - IF hours elapsed ≤ 6: Status = “Submitted (On Time)”
    - IF hours elapsed > 6: Status = “Submitted (Late)”
2. **IF Status = “Submitted (Late)”:**
    - Create Admin Notifications record:
        - Assigned To: [Admin User ID]
        - Priority: “Regular”
        - Notification Category: “Tutor Pipeline”
        - Title: “Late Mock Trial Report - [Applicant Name]”
        - Details: “Mock trial lesson report submitted after 6-hour deadline.
        Applicant: [Applicant Name]
        Mock Trial Date: [Date]
        Submission Time: [Timestamp]
        Hours Late: [X hours]
        FYI: Report has been received but was submitted late.”
        - Link to Mock Trial Lesson: [Lesson Record ID]
        - Link to Tutor Application: [Application Record ID]
        - Action Status: “Completed” (FYI notification - no action needed)

**Purpose:** Automatically categorizes lesson report submissions as on-time or late based on 6-hour deadline

**Type:** Internal Airtable automation (does NOT call n8n workflow)

**Notes:**
- Uses Airtable’s built-in scripting/formula capabilities to calculate timing
- Only creates notification if late (on-time submissions don’t need admin attention)
- Works in conjunction with TASP1 workflow for missing report detection

---

### AT-TA Series: Tutor Application Management

### AT-TA1: Initial Screening - Pass

**Trigger:** Record updated in Tutor Applications

**Conditions:**
- “Initial Screening Status” = “Pass”
- “Screening Pass Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TA1
- Send: Application ID, Applicant Email, Applicant Name

---

### AT-TA2: Interview - Pass

**Trigger:** Record updated in Tutor Applications

**Conditions:**
- “Interview Status” = “Pass”
- “Interview Pass Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TA2
- Send: Application ID, Applicant Email, Applicant Name

---

### AT-TA3: Mock Trial - Pass

**Trigger:** Record updated in Tutor Applications

**Conditions:**
- “Mock Trial Status” = “Pass”
- “Mock Trial Pass Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TA3
- Send: Application ID, Applicant Email, Applicant Name

---

### AT-TA3b: Create User Account After Mock Trial Pass

**Trigger:** Record updated in Tutor Applications

**Conditions:**
- “Mock Trial Pass Email Sent At” is not empty
- “User Account Created At” is empty

**Actions:**
- Call n8n webhook for workflow TA3b
- Send: Application ID, Applicant Email, Applicant Name

**Purpose:** Automatically creates User and Tutor records after mock trial pass, sends login instructions

**Important:** Second condition prevents duplicate account creation. Links to both User and Tutor records are updated by TA3b workflow.

---

### AT-TA4: Onboarding Pass

**Trigger:** Record updated in Tutor Applications

**Conditions:**
- “Onboarding Status” = “Pass”
- “Onboarding Pass Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TA4
- Send: Application ID, Applicant Email, Applicant Name

**Purpose:** Sends congratulations email after onboarding pass, updates Overall Application Status to “Completed”

**Notes:**
- Profile completion handled by Softr portal (no workflow needed)
- User gets full access once Profile Completed At is populated
- Tutors can access platform after profile completion (usually before onboarding call)
- Overall Application Status automatically updated to “Completed” by TA4 workflow

---

### AT-TA5: Application Rejection (Any Stage)

**Trigger:** Record updated in Tutor Applications

**Conditions:**
- (“Initial Screening Status” = “Fail”
OR “Interview Status” = “Fail”
OR “Mock Trial Status” = “Fail”
OR “Onboarding Status” = “Fail”)
- AND “Rejection Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TA5
- Send: Application ID, Applicant Email, Applicant Name

**Note:** Triggers on ANY stage failure, sends same rejection email

---

### AT-T/P/S Series: Xero Contact Creation

### AT-T1: Tutor Record Created → Create Xero Supplier

**Trigger:** Record created in Tutors table

**Conditions:**
- “Xero Contact ID” is empty

**Actions:**
- Call n8n webhook for workflow U1
- Send: `{recordType: "Tutor", recordId: [Tutor Record ID]}`

**Purpose:** Creates Xero supplier contact immediately when tutor record created

**Notes:**
- U1 reads Tutor record → Link to Users → Users.Full Name/Email/Phone
- Xero contact created using data from Users table (via lookup)
- Xero Contact ID stored in Tutors table

---

### AT-P1: Parent Record Created → Create Xero Customer

**Trigger:** Record created in Parents table

**Conditions:**
- “Xero Contact ID” is empty

**Actions:**
- Call n8n webhook for workflow U1
- Send: `{recordType: "Parent", recordId: [Parent Record ID]}`

**Purpose:** Creates Xero customer contact when parent record created

**Notes:**
- Does NOT trigger if Xero Contact ID already populated by U2
- U2 pre-populates Xero ID for lead conversions (Pattern B call to U1)
- This automation catches manual record creation or any edge cases
- U1 reads Parent record → Link to Users → Users.Full Name/Email/Phone

---

### AT-S1: Student Record Created → Create Xero Customer

**Trigger:** Record created in Students table

**Conditions:**
- “Xero Contact ID” is empty

**Actions:**
- Call n8n webhook for workflow U1
- Send: `{recordType: "Student", recordId: [Student Record ID]}`

**Purpose:** Creates Xero customer contact or copies parent’s Xero ID for dependent students

**Notes:**
- For independent students: U1 creates new Xero customer contact
- For dependent students: U1 copies Parent’s Xero Contact ID
- U1 reads Student record → Link to Users → Users.Full Name/Email/Phone

---

### AT-S2: Student Parent Link Updated → Retry Xero Assignment

**Trigger:** Record updated in Students table

**Conditions:**
- “Parent” link field is populated
- “Xero Contact ID” is empty
- Linked Parent’s “Xero Contact ID” is NOT empty

**Actions:**
- Call n8n webhook for workflow U1
- Send: `{recordType: "Student", recordId: [Student Record ID]}`

**Purpose:** Handles edge case where student record created before parent link added

**Notes:**
- Third condition prevents triggering when Parent doesn’t have Xero ID yet
- Ensures dependent students eventually get Parent’s Xero ID
- Resilient to out-of-order record creation

---

### AT-S3: Parent Billing Address Updated → Sync to Dependent Students

**Trigger:** Record updated in Parents table

**Conditions:**
- “Billing Address” field is updated (not empty)

**Actions:**
- Find all linked Student records via “Link to Students” field
- For each linked Student record:
- Update Student “Billing Address” = Parent “Billing Address”

**Purpose:** Keeps dependent students’ billing addresses synchronized with parent’s billing address

**Type:** Internal Airtable automation (does NOT call n8n workflow)

**Notes:**
- Dependent students should have read-only Billing Address field in Softr (auto-populated)
- Independent students fill their own Billing Address during profile completion
- 80-20 assumption: Each student links to max 1 parent (ignores edge case of multiple parents)
- Ensures invoicing uses correct address for dependent students

---

### AT-TP Series: Tutoring Package Management

### AT-TP1: Trigger Create Invoice

**Trigger:** Record created in Tutoring Packages

**Conditions:** None (triggers on all new packages)

**Actions:**
- Call n8n webhook for workflow TP1
- Send: Package ID, Student ID, Parent ID, Subject, Total Hours Expected, Hourly Session Rate

**Note:** Creates client invoice in Xero

---

### AT-TP2: Trigger Send Invoice Email

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Invoice Created At” is not empty
- “Client Invoice Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TP2
- Send: Package ID, Xero Invoice ID, Client Email(s)

**Important:** Second condition prevents duplicate emails

---

### AT-TP3: Trigger Create Bill

**Trigger:** Record created in Tutoring Packages

**Conditions:** None (triggers on all new packages)

**Actions:**
- Call n8n webhook for workflow TP3
- Send: Package ID, Tutor ID, Subject, Total Hours Expected, Tutor Hourly Income

**Note:** Creates tutor bill (Authorized status) in Xero for accounts payable forecasting. Runs parallel to AT-TP1.

---

### AT-TP4: Trigger Send Tutor Package Notification

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Bill Created At” is not empty
- “Tutor Package Notification Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TP4
- Send: Package ID, Tutor Email

**Purpose:** Sends package confirmation email to tutor after bill is created.

**Important:** Second condition prevents duplicate emails

---

### AT-TP5: Trigger Update Bill

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Package Status” = “Completed”
- “Bill Updated At” is empty

**Actions:**
- Call n8n webhook for workflow TP5
- Send: Package ID, Xero Bill ID

**Note:** Updates existing bill with verified package details at completion. Runs parallel to AT-TP8.

---

### AT-TP6: Trigger Create PO

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Bill Updated At” is not empty
- “PO Created At” is empty

**Actions:**
- Call n8n webhook for workflow TP6
- Send: Package ID, Xero Bill ID

**Purpose:** Creates Purchase Order (Billed status) with verified details after bill is updated.

**Note:** This ensures PO is created with final accurate amounts before sending to tutor for signature.

---

### AT-TP7: Trigger Send PO Email

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “PO Created At” is not empty
- “Tutor PO Email Sent At” is empty

**Actions:**
- Call n8n webhook for workflow TP7
- Send: Package ID, Xero PO ID, Tutor Email

**Note:** Sends Purchase Order PDF to tutor for e-signature after package completion.

---

### AT-TP8: Trigger Update Invoice

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Package Status” = “Completed”
- “Invoice Updated At” is empty

**Actions:**
- Call n8n webhook for workflow TP8
- Send: Package ID, Xero Invoice ID, all linked Lesson IDs

**Note:** Updates invoice with actual lesson details. Runs parallel to AT-TP5.

---

### AT-TP9: Trigger Generate Package Report PDF

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Package Status” = “Completed”
- “Package Report PDF” is empty

**Actions:**
- Call n8n webhook for workflow TP9
- Send: Package ID

**Purpose:** Generates consolidated package report PDF with all lesson details

**Note:** Runs after package completion, before completion email is sent

---

### AT-TP10: Trigger Additional Fees Invoice

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Package Status” = “Completed”
- (Transportation Reimbursement > 0 OR Late Cancellation Fees > 0 OR Over-Delivered Hours > 0)
- “Additional Fees Invoice Created At” is empty

**Actions:**
- Call n8n webhook for workflow TP10
- Send: Package ID, Transportation Reimbursement amount, Late Cancellation Fees amount, Over-Delivered Hours, Student/Parent IDs

**Purpose:** Creates additional fees invoice in Xero if any fees exist

**Note:** Includes transportation, late cancellation, and over-delivered hours charges

---

### AT-TP11: Trigger Completion Email

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Invoice Updated At” is not empty
- “Package Report Generated At” is not empty
- “Completion Email Sent At” is empty
- AND EITHER:
- (Transportation Reimbursement = 0 AND Late Cancellation Fees = 0 AND Over-Delivered Hours = 0)
- OR “Additional Fees Invoice Created At” is not empty

**Actions:**
- Call n8n webhook for workflow TP11
- Send: Package ID, Package Invoice Status, Additional Fees status

**Purpose:** Sends completion email to client with all relevant PDFs

**Note:** Waits for package report PDF generation and optional additional fees invoice before sending

---

### AT-TP12: Trigger Package Completion Check

**Trigger:** Record updated in Tutoring Packages

**Conditions:**
- “Total Hours Delivered” >= “Total Hours Expected”
- “Package Status” = “Active”

**Actions:**
- Call n8n webhook for workflow TP12
- Send: Package ID

**Purpose:** Instantly detects when package reaches hour threshold and checks if all lessons are verified

**Workflow Logic:**
- IF all lessons verified → Set Package Status = “Completed”
- IF lessons unverified AND “Unverified Lessons Notification Sent At” is empty → Create admin notification + populate timestamp
- IF lessons unverified AND notification already sent → Do nothing (TPSP1 handles reminders)

**Important:**
- Uses “Total Hours Delivered” (includes Pre-Migration hours) not just “Hours Delivered”
- Package Status condition prevents duplicate triggers after completion
- Idempotent notification creation prevents spam

---

### AT-TP13: Update Admin Flag Metadata

**Trigger:** Record updated in Tutoring Packages table

**Conditions:**
- “Admin Flag” field updated
- “Admin Flag” ≠ empty

**Actions:**
1. Update field: “Flagged At” = NOW()
2. Update field: “Flagged By” = Current User (triggering the automation)

**Purpose:** Automatically timestamps and tracks which admin flagged a package for operational follow-up

**Notes:**
- Supports day-to-day operational tracking separate from completion workflows
- Previously named AT-PKG-FLAG, renamed to align with TP-series convention

---

### AT-TP14: Auto-Resolve Package

**Trigger:** Record matches conditions in Tutoring Packages table

**Conditions (ALL must be true):**
- “Package Status” = “Completed”
- “All Payments Paid” = TRUE
- “Payout Status” = “Paid” (lookup from Payouts table)
- “PO Signed At” is NOT empty

**Actions:**
1. Update field: “Package Status” = “Resolved”
2. Update field: “Resolved At” = NOW()

**Purpose:** Automatically sets packages to terminal “Resolved” status when all financial conditions are met

**Type:** Internal Airtable automation (does NOT call n8n workflow)

**Notes:**
- Terminal state - packages never leave “Resolved” status
- Prevents manual resolution errors
- Rollup field “All Payments Paid” checks if all payment records are marked as Paid
- Payout Status must be “Paid” (not “Processing”) - only resolves after Xero confirms payment reconciliation

---

### AT-TP15: Create Payout Record

**Trigger:** Record updated in Lessons table

**Conditions:**
- “Lesson Status” changes to “Verified”
- Linked Package has no payout record yet (check via count of linked records = 0)

**Actions:**
1. Create Payouts record:
- Link to Package = [trigger lesson’s package]
- Payout Status = “Pending Signature”

**Purpose:** Creates payout tracking record when FIRST lesson for a package is verified (not at package creation)

**Type:** Internal Airtable automation (does NOT call n8n workflow)

**Notes:**
- Only triggers for the first verified lesson
- Subsequent verified lessons won’t create duplicate payout records
- Payout record created early to prepare for eventual package completion
- Payout Status options: Pending Signature → Unpaid → Processing → Paid

---

### AT-TP17: Create Main Invoice Payment Record

**Trigger:** Record updated in Tutoring Packages table

**Conditions:**
- “Invoice Created At” is populated (changed from empty to a date)

**Actions:**
1. Create Payments record:
- Link to Package = [this package]
- Payment Type = “Main Invoice”
- Due Date = Invoice Created At + 7 days
- Payment Status = “Unpaid”

**Purpose:** Automatically creates payment tracking record when main invoice is created

**Type:** Internal Airtable automation (does NOT call n8n workflow)

**Notes:**
- Runs after TP1 creates invoice and populates Invoice Created At
- Enables payment status tracking separate from Package record
- Due date automatically calculated for reminder workflows

---

### AT-TP18: Create Additional Fees Payment Record

**Trigger:** Record updated in Tutoring Packages table

**Conditions:**
- “Additional Fees Invoice Created At” is populated (changed from empty to a date)

**Actions:**
1. Create Payments record:
- Link to Package = [this package]
- Payment Type = “Additional Fees Invoice”
- Due Date = Additional Fees Invoice Created At + 7 days
- Payment Status = “Unpaid”

**Purpose:** Automatically creates payment tracking record when additional fees invoice is created

**Type:** Internal Airtable automation (does NOT call n8n workflow)

**Notes:**
- Runs after TP10 creates additional fees invoice
- Only triggered if package has additional fees (transportation, late cancellation, or over-delivery)
- Conditional creation - not all packages will have this payment record

---

### AT-U Series: User Management

### AT-U2: Trigger Lead Conversion

**Trigger:** Button click / Airtable script in Leads table

**Actions:**
- Call n8n webhook for workflow U2
- Send: Lead ID

**Purpose:** Converts lead to client when admin clicks “Convert Lead” button

**Note:** Button-triggered, not automatic status change

---

## Category 2: Internal Airtable Automations

These handle logic within Airtable without calling external services.

### AT-L3: Update Lesson Status After Verification

**Note:** AT-L3 is documented in Category 1 above for organizational clarity. See AT-L3 specification in the AT-L Series section.

---

## Automation Summary Table

| ID | Name | Type | Trigger | n8n Workflow |
| --- | --- | --- | --- | --- |
| AT-L1 | Generate Lesson Report PDF | n8n | Status = Verified + PDF timestamp empty | L1 |
| AT-L2 | Send Lesson Completion Email | n8n | PDF ready + email timestamp empty | L2 |
| AT-L3 | Update Lesson Status After Verification | Internal | All verified = TRUE + Status ≠ Verified | N/A |
| AT-TA1 | Screening Pass | n8n | Status = Pass | TA1 |
| AT-TA2 | Interview Pass | n8n | Status = Pass | TA2 |
| AT-TA3 | Mock Trial Pass | n8n | Status = Pass | TA3 |
| AT-TA3b | Create User Account | n8n | Mock Trial email sent | TA3b |
| AT-TA4 | Onboarding Pass | n8n | Status = Pass | TA4 |
| AT-TA5 | Rejection | n8n | Any Status = Fail | TA5 |
| AT-T1 | Tutor Record Created | n8n | Tutor created + no Xero ID | U1 |
| AT-P1 | Parent Record Created | n8n | Parent created + no Xero ID | U1 |
| AT-S1 | Student Record Created | n8n | Student created + no Xero ID | U1 |
| AT-S2 | Student Parent Link Updated | n8n | Parent linked + no Xero ID | U1 |
| AT-S3 | Sync Parent Billing Address | Internal | Parent Billing Address updated | N/A |
| AT-TP1 | Trigger Create Invoice | n8n | Package created | TP1 |
| AT-TP2 | Trigger Send Invoice Email | n8n | Invoice created | TP2 |
| AT-TP3 | Trigger Create Bill | n8n | Package created | TP3 |
| AT-TP4 | Trigger Tutor Package Notification | n8n | Bill created | TP4 |
| AT-TP5 | Trigger Update Bill | n8n | Status = Completed | TP5 |
| AT-TP6 | Trigger Create PO | n8n | Bill updated | TP6 |
| AT-TP7 | Trigger Send PO Email | n8n | PO created | TP7 |
| AT-TP8 | Trigger Update Invoice | n8n | Status = Completed | TP8 |
| AT-TP9 | Trigger Generate Package Report PDF | n8n | Status = Completed + Report PDF empty | TP9 |
| AT-TP10 | Trigger Additional Fees Invoice | n8n | Fees exist | TP10 |
| AT-TP11 | Trigger Completion Email | n8n | Report ready + fees handled | TP11 |
| AT-TP12 | Trigger Package Completion Check | n8n | Total Hours Delivered >= Expected + Status Active | TP12 |
| AT-TP13 | Update Admin Flag Metadata | Internal | Admin Flag updated | N/A |
| AT-U2 | Trigger Lead Conversion | n8n | Button click | U2 |

**Total Automations: 28**

---

## Key Tables & Fields Reference

This section documents the primary tables and fields used by automations.

### Lessons Table

**Core Fields:**
- Lesson Date, Hours Delivered
- Link to Tutoring Packages
- Lesson Status (single select: Pending Verification / Verified / Cancelled)

**Verification Fields:**
- Over-Delivery Verified (checkbox)
- Late Cancellation Verified (checkbox)
- Transportation Verified (checkbox)

**Audit Fields:**
- Lesson Report PDF (attachment)
- Lesson Report PDF Created At (datetime)
- Lesson Completion Email Sent At (datetime)
- Lesson Report Submitted At (datetime)

**Notes:**
- Hours Delivered rollup in Packages table filters for Status = “Verified” only
- LE1 workflow creates lessons with Status = “Verified” or “Pending Verification”
- LE1 sets verification checkboxes based on additional fees detection

---

### Tutoring Packages Table

**Core Fields:**
- Total Hours Expected (number - expected/confirmed package hours)
- Hourly Session Rate
- Link to Tutors, Students, Parents

**Calculated Fields:**
- Hours Delivered (rollup: SUM of {Hours Delivered} from Lessons where Status = “Verified”)
- Total Hours Delivered (formula: {Pre-Migration Hours Delivered} + {Hours Delivered})
- Pre-Migration Hours Delivered (number - for Pre-Migration packages only)
- Pre-Migration Package (checkbox - TRUE for migrated packages)

**Status Fields:**
- Package Status (single select: Active / Completed / Cancelled)
- Package Invoice Status (single select: Unpaid / Partially Paid / Paid)

**Admin Fields:**
- Admin Flag (single select - uses conversation feature for notes)
- Flagged At (datetime)
- Flagged By (user field)
- Unverified Lessons Notification Sent At (datetime)

**Xero Fields:**
- Xero Invoice ID, Xero Bill ID, Xero PO ID

---

### Users Table

**Core Fields:**
- First Name, Last Name, Email, Phone
- Role (single select: Tutor / Parent / Student / Admin)
- User Status (single select: Lead / Active / Inactive)

**Audit Fields:**
- Created At
- Profile Completed At (set by Softr when user completes profile)

**Relationships:**
- Link to Tutors (one-to-one)
- Link to Parents (one-to-one)
- Link to Students (one-to-one)

**Notes:**
- User Status determines access level in Softr portals
- Profile Completed At controls portal access (empty = restricted, populated = full access)

---

### Tutors Table

**Core Fields:**
- Link to Users (required - source of truth for name/email/phone)
- Subjects, Experience
- Banking Details

**Audit Fields:**
- Profile Completed At
- Xero Contact ID (supplier type)
- Xero Contact Created At

**Notes:**
- Contact info accessed via Lookups from Users table
- Xero Contact ID stored here (not in Users table)

---

### Parents Table

**Core Fields:**
- Link to Users (required - source of truth for name/email/phone)

**Audit Fields:**
- Xero Contact ID (customer type)
- Created At

**Notes:**
- Contact info accessed via Lookups from Users table
- Xero Contact ID shared with dependent students for billing

---

### Students Table

**Core Fields:**
- Link to Users (required - source of truth for name/email/phone)
- Link to Parents (many-to-many)
- Grade, School
- Independent (checkbox - TRUE if no parent)

**Audit Fields:**
- Xero Contact ID (customer type - same as parent if dependent, unique if independent)
- Created At

**Notes:**
- Contact info accessed via Lookups from Users table
- Xero Contact ID stored here (not in Users table)

---

### Leads Table

**Core Fields:**
- Name, Email, Phone
- Lead Type (Parent / Student)
- Student Name, Grade (if applicable)
- Subject Interest
- Lead Status (New / Contacted / Qualified / Converted / Lost)
- Lead Source (Website / Referral / Other)

**Audit Fields:**
- Created At
- Converted At
- Link to converted User/Parent/Student records

---

### Admin Notifications Table

**Core Fields:**
- Assigned To (User field - links to Users table)
- Notification Category (single select: Leads & Growth, Tutor Pipeline, Lesson Verification, Package Verification, Payout Needed, Late Submission, System Error)
- Priority (single select: Low / Medium / High / Urgent)
- Title (single line text)
- Details (long text)
- Link to Lesson (link to Lessons)
- Link to Package (link to Tutoring Packages)
- Action Status (single select: Pending / In Progress / Completed)

**Audit Fields:**
- Created At
- Updated At
- Completed At

---